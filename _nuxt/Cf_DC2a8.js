var W=Object.defineProperty;var x=(a,e,i)=>e in a?W(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var k=(a,e,i)=>x(a,typeof e!="symbol"?e+"":e,i);import{a1 as Q,B as z,T as w,a2 as E,a3 as C,W as X,a4 as Y,a5 as Z,i as K,E as q,a6 as S,q as I,O as N,J as A,L as ee,a7 as ae,j as te,a8 as se,U as G,a9 as ie,aa as oe,ab as re}from"./C-F815by.js";import{c as b}from"./DmRSJzSs.js";const ne=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],le=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",T=[];class ce{constructor(){k(this,"_data",new M);k(this,"_hash",new M([...ne]));k(this,"_nDataBytes",0);k(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const i=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(i/4294967296),this._data.words[(t+64>>>9<<4)+15]=i,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,i){const t=this._hash.words;let s=t[0],l=t[1],n=t[2],m=t[3],y=t[4],d=t[5],r=t[6],f=t[7];for(let u=0;u<64;u++){if(u<16)T[u]=e[i+u]|0;else{const v=T[u-15],g=(v<<25|v>>>7)^(v<<14|v>>>18)^v>>>3,O=T[u-2],B=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;T[u]=g+T[u-7]+B+T[u-16]}const c=y&d^~y&r,o=s&l^s&n^l&n,h=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),_=(y<<26|y>>>6)^(y<<21|y>>>11)^(y<<7|y>>>25),p=f+_+c+le[u]+T[u],D=h+o;f=r,r=d,d=y,y=m+p|0,m=n,n=l,l=s,s=p+D|0}t[0]=t[0]+s|0,t[1]=t[1]+l|0,t[2]=t[2]+n|0,t[3]=t[3]+m|0,t[4]=t[4]+y|0,t[5]=t[5]+d|0,t[6]=t[6]+r|0,t[7]=t[7]+f|0}_append(e){typeof e=="string"&&(e=M.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let i,t=this._data.sigBytes/64;e?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const s=t*16,l=Math.min(s*4,this._data.sigBytes);if(s){for(let n=0;n<s;n+=16)this._doProcessBlock(this._data.words,n);i=this._data.words.splice(0,s),this._data.sigBytes-=l}return new M(i,l)}}class M{constructor(e,i){k(this,"words");k(this,"sigBytes");e=this.words=e||[],this.sigBytes=i===void 0?e.length*4:i}static fromUtf8(e){const i=unescape(encodeURIComponent(e)),t=i.length,s=[];for(let l=0;l<t;l++)s[l>>>2]|=(i.charCodeAt(l)&255)<<24-l%4*8;return new M(s,t)}toBase64(){const e=[];for(let i=0;i<this.sigBytes;i+=3){const t=this.words[i>>>2]>>>24-i%4*8&255,s=this.words[i+1>>>2]>>>24-(i+1)%4*8&255,l=this.words[i+2>>>2]>>>24-(i+2)%4*8&255,n=t<<16|s<<8|l;for(let m=0;m<4&&i*8+m*6<this.sigBytes*8;m++)e.push(ue.charAt(n>>>6*(3-m)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let i=0;i<e.sigBytes;i++){const t=e.words[i>>>2]>>>24-i%4*8&255;this.words[this.sigBytes+i>>>2]|=t<<24-(this.sigBytes+i)%4*8}else for(let i=0;i<e.sigBytes;i+=4)this.words[this.sigBytes+i>>>2]=e.words[i>>>2];this.sigBytes+=e.sigBytes}}function de(a){return new ce().finalize(a).toBase64()}function F(a){return de(Q(a))}const fe={trailing:!0};function he(a,e=25,i={}){if(i={...fe,...i},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let t,s,l=[],n,m;const y=(d,r)=>(n=ve(a,d,r),n.finally(()=>{if(n=null,i.trailing&&m&&!s){const f=y(d,m);return m=null,f}}),n);return function(...d){return n?(i.trailing&&(m=d),n):new Promise(r=>{const f=!s&&i.leading;clearTimeout(s),s=setTimeout(()=>{s=null;const u=i.leading?t:y(this,d);for(const c of l)c(u);l=[]},e),f?(t=y(this,d),r(t)):l.push(r)})}}async function ve(a,e,i){return await a.apply(e,i)}const ye=Symbol.for("nuxt:client-only"),me=a=>a==="defer"||a===!1;function ge(...a){var c;const e=typeof a[a.length-1]=="string"?a.pop():void 0;_e(a[0],a[1])&&a.unshift(e);let[i,t,s={}]=a;const l=z(()=>w(i));if(typeof l.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof t!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const n=E();s.server??(s.server=!0),s.default??(s.default=De),s.getCachedData??(s.getCachedData=J),s.lazy??(s.lazy=!1),s.immediate??(s.immediate=!0),s.deep??(s.deep=C.deep),s.dedupe??(s.dedupe="cancel"),s._functionName,n._asyncData[l.value];const m={cause:"initial",dedupe:s.dedupe};(c=n._asyncData[l.value])!=null&&c._init||(m.cachedData=s.getCachedData(l.value,n,{cause:"initial"}),n._asyncData[l.value]=V(n,l.value,t,s,m.cachedData));const y=n._asyncData[l.value];y._deps++;const d=()=>n._asyncData[l.value].execute(m),r=s.server!==!1&&n.payload.serverRendered;{let o=function(v){const g=n._asyncData[v];g!=null&&g._deps&&(g._deps--,g._deps===0&&(g==null||g._off()))};const h=X();if(h&&r&&s.immediate&&!h.sp&&(h.sp=[]),h&&!h._nuxtOnBeforeMountCbs){h._nuxtOnBeforeMountCbs=[];const v=h._nuxtOnBeforeMountCbs;Y(()=>{v.forEach(g=>{g()}),v.splice(0,v.length)}),Z(()=>v.splice(0,v.length))}const _=h&&(h._nuxtClientOnly||K(ye,!1));r&&n.isHydrating&&(y.error.value||y.data.value!=null)?(y.pending.value=!1,y.status.value=y.error.value?"error":"success"):h&&(!_&&n.payload.serverRendered&&n.isHydrating||s.lazy)&&s.immediate?h._nuxtOnBeforeMountCbs.push(d):s.immediate&&d();const p=se(),D=q([l,...s.watch||[]],([v],[g])=>{var O,B;if((v||g)&&v!==g){const U=((O=n._asyncData[g])==null?void 0:O.data.value)!==C.value;g&&o(g);const R={cause:"initial",dedupe:s.dedupe};(B=n._asyncData[v])!=null&&B._init||(R.cachedData=s.getCachedData(v,n,{cause:"initial"}),n._asyncData[v]=V(n,v,t,s,R.cachedData)),n._asyncData[v]._deps++,(s.immediate||U)&&n._asyncData[v].execute(R)}else y._execute({cause:"watch",dedupe:s.dedupe})},{flush:"sync"});p&&S(()=>{D(),o(l.value)})}const f={data:j(()=>{var o;return(o=n._asyncData[l.value])==null?void 0:o.data}),pending:j(()=>{var o;return(o=n._asyncData[l.value])==null?void 0:o.pending}),status:j(()=>{var o;return(o=n._asyncData[l.value])==null?void 0:o.status}),error:j(()=>{var o;return(o=n._asyncData[l.value])==null?void 0:o.error}),refresh:(...o)=>n._asyncData[l.value].execute(...o),execute:(...o)=>n._asyncData[l.value].execute(...o),clear:()=>H(n,l.value)},u=Promise.resolve(n._asyncDataPromises[l.value]).then(()=>f);return Object.assign(u,f),u}function j(a){return z({get(){var e;return(e=a())==null?void 0:e.value},set(e){const i=a();i&&(i.value=e)}})}function _e(a,e){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof e=="function")}function H(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=C.errorValue),a._asyncData[e]&&(a._asyncData[e].data.value=void 0,a._asyncData[e].error.value=C.errorValue,a._asyncData[e].pending.value=!1,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]&&(a._asyncDataPromises[e].cancelled=!0),a._asyncDataPromises[e]=void 0)}function pe(a,e){const i={};for(const t of e)i[t]=a[t];return i}function V(a,e,i,t,s){var f;(f=a.payload._errors)[e]??(f[e]=C.errorValue);const l=t.getCachedData!==J,n=i,m=t.deep?I:N,y=s!=null,d=a.hook("app:data:refresh",async u=>{(!u||u.includes(e))&&await r.execute({cause:"refresh:hook"})}),r={data:m(y?s:t.default()),pending:N(!y),error:A(a.payload._errors,e),status:N("idle"),execute:(u={})=>{if(a._asyncDataPromises[e]){if(me(u.dedupe??t.dedupe))return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}if(u.cause==="initial"||a.isHydrating){const o="cachedData"in u?u.cachedData:t.getCachedData(e,a,{cause:u.cause??"refresh:manual"});if(o!=null)return a.payload.data[e]=r.data.value=o,r.error.value=C.errorValue,r.status.value="success",Promise.resolve(o)}r.pending.value=!0,r.status.value="pending";const c=new Promise((o,h)=>{try{o(n(a))}catch(_){h(_)}}).then(async o=>{if(c.cancelled)return a._asyncDataPromises[e];let h=o;t.transform&&(h=await t.transform(o)),t.pick&&(h=pe(h,t.pick)),a.payload.data[e]=h,r.data.value=h,r.error.value=C.errorValue,r.status.value="success"}).catch(o=>{if(c.cancelled)return a._asyncDataPromises[e];r.error.value=ae(o),r.data.value=te(t.default()),r.status.value="error"}).finally(()=>{c.cancelled||(r.pending.value=!1,delete a._asyncDataPromises[e])});return a._asyncDataPromises[e]=c,a._asyncDataPromises[e]},_execute:he((...u)=>r.execute(...u),0,{leading:!0}),_default:t.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var u;d(),(u=a._asyncData[e])!=null&&u._init&&(a._asyncData[e]._init=!1),l||ee(()=>{var c;(c=a._asyncData[e])!=null&&c._init||(H(a,e),r.execute=()=>Promise.resolve(),r.data.value=C.value)})}};return r}const De=()=>C.value,J=(a,e,i)=>{if(e.isHydrating)return e.payload.data[a];if(i.cause!=="refresh:manual"&&i.cause!=="refresh:hook")return e.static.data[a]};function P(a,e,i){const[t={},s]=typeof e=="string"?[{},e]:[e,i],l=z(()=>w(a)),n=z(()=>w(t.key)||"$f"+F([s,typeof l.value=="string"?l.value:"",...be(t)]));if(!t.baseURL&&typeof l.value=="string"&&l.value[0]==="/"&&l.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:y,default:d,transform:r,pick:f,watch:u,immediate:c,getCachedData:o,deep:h,dedupe:_,...p}=t,D=G({...ie,...p,cache:typeof t.cache=="boolean"?void 0:t.cache}),v={server:m,lazy:y,default:d,transform:r,pick:f,immediate:c,getCachedData:o,deep:h,dedupe:_,watch:u===!1?[]:[...u||[],D]};if(!c){let B=function(){v.immediate=!0};q(n,B,{flush:"sync",once:!0}),q([...u||[],D],B,{flush:"sync",once:!0})}let g;return ge(u===!1?n.value:n,()=>{var L;(L=g==null?void 0:g.abort)==null||L.call(g,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),g=typeof AbortController<"u"?new AbortController:{};const B=w(t.timeout);let U;return B&&(U=setTimeout(()=>g.abort(new DOMException("Request aborted due to timeout.","AbortError")),B),g.signal.onabort=()=>clearTimeout(U)),(t.$fetch||globalThis.$fetch)(l.value,{signal:g.signal,...D}).finally(()=>{clearTimeout(U)})},v)}function be(a){var i;const e=[((i=w(a.method))==null?void 0:i.toUpperCase())||"GET",w(a.baseURL)];for(const t of[a.params||a.query]){const s=w(t);if(!s)continue;const l={};for(const[n,m]of Object.entries(s))l[w(n)]=w(m);e.push(l)}if(a.body){const t=w(a.body);if(!t)e.push(F(t));else if(t instanceof ArrayBuffer)e.push(F(Object.fromEntries([...new Uint8Array(t).entries()].map(([s,l])=>[s,l.toString()]))));else if(t instanceof FormData){const s={};for(const l of t.entries()){const[n,m]=l;s[n]=m instanceof File?m.name:m}e.push(F(s))}else if(oe(t))e.push(F(G(t)));else try{e.push(F(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return e}var Be={};const we=Be.DEV_MODE==="true",$=we?"http://127.0.0.1:1234":"https://laravel.yomuhoudai.club",Te=re("Library",()=>{const a=I([]),e=I(!1);return{loading:e,books:a,getBooks:async({onSuccess:d,onError:r}={})=>{var h,_,p,D,v;e.value=!0;const f="/api/v1/books",{data:u,error:c,status:o}=await P($+f,{method:"GET"},"$zr4nyfsTx3");e.value=!1,o.value==="success"&&!c.value&&u.value!=null?(a.value=((h=u.value)==null?void 0:h.data)??[],b({message:"Books loaded successfully",toastOps:{description:((_=u.value)==null?void 0:_.message)??""},type:"success"})(),d==null||d((p=u.value)==null?void 0:p.data)):(b({message:"Failed to load books",toastOps:{description:((D=c.value)==null?void 0:D.statusMessage)??"Unknown error"},type:"error"})(),r==null||r(((v=c.value)==null?void 0:v.statusMessage)??"Failed to fetch books"))},getBookById:async({id:d,onSuccess:r,onError:f})=>{var _,p;e.value=!0;const u=`/api/v1/books/${d}`,{data:c,error:o,status:h}=await P($+u,{method:"GET"},"$MIx4hiFoyp");e.value=!1,h.value==="success"&&!o.value?(b({message:"Book loaded successfully",toastOps:{description:((_=c.value)==null?void 0:_.message)??""},type:"success"})(),r==null||r((p=c.value)==null?void 0:p.data)):(b({message:`Failed to load book with id ${d}`,toastOps:{description:o.value??`Error fetching book with id ${d}`},type:"error"})(),f==null||f(o.value??`Failed to fetch book with id ${d}`))},createBook:async({book:d,onSuccess:r,onError:f})=>{var _,p,D,v;e.value=!0;const u="/api/v1/books",{data:c,error:o,status:h}=await P($+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)},"$hnmTN7-7GC");e.value=!1,h.value==="success"&&!o.value&&((_=c.value)==null?void 0:_.data)!=null?(b({message:"Book created successfully",toastOps:{description:((p=c.value)==null?void 0:p.message)??""},type:"success"})(),a.value.push(c.value.data),r==null||r((D=c.value)==null?void 0:D.data)):(b({message:"Failed to create book",toastOps:{description:c.value&&c.value.message?c.value.message:((v=o.value)==null?void 0:v.statusMessage)??"Unknown error"},type:"error"})(),f==null||f(o.value??"Failed to create book"))},updateBook:async({id:d,book:r,onSuccess:f,onError:u})=>{var p,D,v;e.value=!0;const c=`/api/v1/books/${d}`,{data:o,error:h,status:_}=await P($+c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},"$jroS2fKQzC");e.value=!1,_.value==="success"&&!h.value?(b({message:"Book updated successfully",toastOps:{description:((p=o.value)==null?void 0:p.message)??""},type:"success"})(),f==null||f((D=o.value)==null?void 0:D.data)):(b({message:`Failed to update book with id ${d}`,toastOps:{description:o.value&&o.value.message?o.value.message:((v=h.value)==null?void 0:v.statusMessage)??"Unknown error"},type:"error"})(),u==null||u(h.value??`Failed to update book with id ${d}`))},deleteBook:async({id:d,onSuccess:r,onError:f})=>{var _,p;e.value=!0;const u=`/api/v1/books/${d}`,{data:c,error:o,status:h}=await P($+u,{method:"DELETE"},"$RQuxihGNY5");if(e.value=!1,h.value==="success"&&!o.value){b({message:"Book deleted successfully",toastOps:{description:""},type:"success"})();const D=a.value.findIndex(v=>v.id===d);D!==-1&&a.value.splice(D,1),r==null||r(c.value)}else b({message:`Failed to delete ${(_=a.value.find(D=>D.id==d))==null?void 0:_.title}`,toastOps:{description:c.value&&c.value.message?c.value.message:((p=o.value)==null?void 0:p.statusMessage)??`Error deleting book with id ${d}`},type:"error"})(),f==null||f(o.value??`Failed to delete book with id ${d}`)},searchBooksByTitle:async({title:d,onSuccess:r,onError:f})=>{var _,p;e.value=!0;const u="/api/v1/books/search/title",{data:c,error:o,status:h}=await P(`${$+u}?q=${encodeURIComponent(d)}`,{method:"GET"},"$2rJ_3AV5CC");e.value=!1,h.value==="success"&&!o.value?(b({message:"Books found by title",toastOps:{description:((_=c.value)==null?void 0:_.message)??""},type:"success"})(),r==null||r((p=c.value)==null?void 0:p.data)):(b({message:"Failed to search books by title",toastOps:{description:o.value??"Unknown error"},type:"error"})(),f==null||f(o.value??"Failed to search books by title"))},searchBooksByAuthor:async({author:d,onSuccess:r,onError:f})=>{var _,p;e.value=!0;const u="/api/v1/books/search/author",{data:c,error:o,status:h}=await P(`${u}?q=${encodeURIComponent(d)}`,{method:"GET"},"$qHWkJeXrhB");e.value=!1,h.value==="success"&&!o.value?(b({message:"Books found by author",toastOps:{description:((_=c.value)==null?void 0:_.message)??""},type:"success"})(),r==null||r((p=c.value)==null?void 0:p.data)):(b({message:"Failed to search books by author",toastOps:{description:o.value??"Unknown error"},type:"error"})(),f==null||f(o.value??"Failed to search books by author"))}}},{persist:{}});export{Te as u};
